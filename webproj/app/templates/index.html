{{ title }}

<script type="text/javascript"src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=&callback=myMap&libraries=&v=weekly"></script>
<div id="googleMap" style="width: 100%; height: 100%;"></div>

    <script th:inline="javascript">
      
let car1 = 
  {
    "Latitude": 41.198193, 
    "Longitude": -8.627454 
  }

let car2 = 
  {
    "Latitude": 41.198187, 
    "Longitude": -8.627414 
  }

let car3 = 
  {
    "Latitude": 41.198183, 
    "Longitude": -8.627371 
  }

let car4 = 
  {
    "Latitude": 41.198290, 
    "Longitude": -8.627454 
  }

let car5 = 
  {
    "Latitude": 41.198287, 
    "Longitude": -8.627414 
  }

let car6 = 
  {
    "Latitude": 41.198282, 
    "Longitude": -8.627371 
  }

let mapProp= {center:new google.maps.LatLng(41.198193, -8.627414),zoom:18,};
var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
var car1marker = new google.maps.Marker({position: new google.maps.LatLng(car1.Latitude, car1.Longitude), 
    icon: {
        url: '../static/images/blue_car.png',
        scaledSize: new google.maps.Size(12, 12)
    }
});
var car2marker = new google.maps.Marker({position: new google.maps.LatLng(car2.Latitude, car2.Longitude), 
    icon: {
        url: '../static/images/red_car.png',
        scaledSize: new google.maps.Size(12, 12)
    }
});
var car3marker = new google.maps.Marker({position: new google.maps.LatLng(car3.Latitude, car3.Longitude), 
    icon: {
        url: '../static/images/yellow_car.png',
        scaledSize: new google.maps.Size(12, 12)
    }
});

var car4marker = new google.maps.Marker({position: new google.maps.LatLng(car4.Latitude, car4.Longitude), 
    icon: {
        url: '../static/images/green_car.png',
        scaledSize: new google.maps.Size(12, 12)
    }
});

var car5marker = new google.maps.Marker({position: new google.maps.LatLng(car5.Latitude, car5.Longitude), 
    icon: {
        url: '../static/images/pink_car.png',
        scaledSize: new google.maps.Size(12, 12)
    }
});

var car6marker = new google.maps.Marker({position: new google.maps.LatLng(car6.Latitude, car6.Longitude), 
    icon: {
        url: '../static/images/grey_car.png',
        scaledSize: new google.maps.Size(12, 12)
    }
});
           



setInterval(updateMarker, 1000);

function updateMarker(){
  $.get('get_coords', {}, function (coordinates) {
    console.log(coordinates)
    console.log("OK")
    car1.Latitude=coordinates.car1_lat
    car1.Longitude=coordinates.car1_lon
    car2.Latitude=coordinates.car2_lat
    car2.Longitude=coordinates.car2_lon
    car3.Latitude=coordinates.car3_lat
    car3.Longitude=coordinates.car3_lon
    car4.Latitude=coordinates.car4_lat
    car4.Longitude=coordinates.car4_lon
    car5.Latitude=coordinates.car5_lat
    car5.Longitude=coordinates.car5_lon
    car6.Latitude=coordinates.car6_lat
    car6.Longitude=coordinates.car6_lon
  });
  myLatLng1=new google.maps.LatLng(car1.Latitude, car1.Longitude);
  myLatLng2=new google.maps.LatLng(car2.Latitude, car2.Longitude);
  myLatLng3=new google.maps.LatLng(car3.Latitude, car3.Longitude);
  myLatLng4=new google.maps.LatLng(car4.Latitude, car4.Longitude);
  myLatLng5=new google.maps.LatLng(car5.Latitude, car5.Longitude);
  myLatLng6=new google.maps.LatLng(car6.Latitude, car6.Longitude);
  car1marker.setPosition(myLatLng1);
  car1marker.setMap(map);
  car2marker.setPosition(myLatLng2);
  car2marker.setMap(map);
  car3marker.setPosition(myLatLng3);
  car3marker.setMap(map);
  car4marker.setPosition(myLatLng4);
  car4marker.setMap(map);
  car5marker.setPosition(myLatLng5);
  car5marker.setMap(map);
  car6marker.setPosition(myLatLng6);
  car6marker.setMap(map);
}

</script>

    